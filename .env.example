# General settings
LOG_LEVEL=INFO

# Module enable/disable
UDP_LISTENER_ENABLED=true
MQTT_BRIDGE_ENABLED=true
WEATHER_SCRAPER_ENABLED=true
GROWATT_CONTROLLER_ENABLED=false
PEMS_ENERGY_CONTROLLER_ENABLED=true

# MQTT Configuration
MQTT_BROKER=mqtt
MQTT_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=

# InfluxDB Configuration
INFLUXDB_HOST=http://influxdb:8086
INFLUXDB_TOKEN=your-influxdb-token-here
INFLUXDB_ORG=loxone
INFLUXDB_BUCKET=loxone

# UDP Listener Configuration
UDP_LISTENER_HOST=0.0.0.0
UDP_LISTENER_PORT=2000

# Loxone Bridge Configuration
LOXONE_HOST=192.168.0.200
LOXONE_PORT=4000
# Comma-separated list of MQTT topics to forward to Loxone
MQTT_TOPICS=energy/solar,teplomer/TC,teplomer/RH,teslamate/cars/1/+

# Weather Configuration
USE_SERVICE=openmeteo
LATITUDE=49.4949522
LONGITUDE=17.4302361
OPENWEATHERMAP_API_KEY=
# Weather update interval in seconds (30 minutes)
WEATHER_UPDATE_INTERVAL=1800

# PEMS v2 Energy Management Configuration
PEMS_SIMULATION_MODE=false
PEMS_ADVISORY_MODE=false
# System timing intervals (validated: control_interval <= optimization_interval)
PEMS_OPTIMIZATION_INTERVAL=3600
PEMS_CONTROL_INTERVAL=300

# InfluxDB Configuration for PEMS v2
INFLUXDB_URL=http://influxdb:8086
INFLUXDB_TOKEN=your-influxdb-token-here
INFLUXDB_ORG=loxone
INFLUXDB_BUCKET_HISTORICAL=loxone
INFLUXDB_BUCKET_LOXONE=loxone
INFLUXDB_BUCKET_WEATHER=weather_forecast
INFLUXDB_BUCKET_SOLAR=loxone
INFLUXDB_BUCKET_PREDICTIONS=predictions
INFLUXDB_BUCKET_OPTIMIZATION=optimization

# PV Prediction Settings (validated ranges)
PV_MODEL_PATH=models/pv_predictor.pkl
PV_UPDATE_INTERVAL=3600  # min: 300 seconds (5 minutes)
PV_HORIZON_HOURS=48      # range: 1-168 hours
PV_CONFIDENCE_LEVELS=[0.1,0.5,0.9]  # must be sorted, between 0.0-1.0

# Thermal Settings (validated temperature ranges)
THERMAL_DEFAULT_SETPOINT_DAY=21.0    # range: 15-30°C
THERMAL_DEFAULT_SETPOINT_NIGHT=19.0  # range: 10-25°C, must be ≤ day setpoint
THERMAL_COMFORT_BAND=0.5             # range: 0.1-5.0°C

# Optimization Settings (validated constraints)
OPT_HORIZON_HOURS=48        # optimization horizon
OPT_CONTROL_HOURS=24        # must be ≤ horizon_hours
OPT_TIME_STEP_MINUTES=60    # range: 5-120 minutes
OPT_SOLVER=APOPT
OPT_MAX_SOLVE_TIME=30
# All weights must be non-negative, at least one positive
OPT_COST_WEIGHT=1.0
OPT_SELF_CONSUMPTION_WEIGHT=0.3
OPT_PEAK_SHAVING_WEIGHT=0.1
OPT_COMFORT_WEIGHT=0.5

# Battery Settings (validated for safety and realism)
BATTERY_CAPACITY_KWH=10.0    # must be positive
BATTERY_MAX_POWER_KW=5.0     # must be positive, C-rate ≤ 5.0
BATTERY_EFFICIENCY=0.95      # range: 0.5-1.0 (50%-100%)
BATTERY_MIN_SOC=0.1          # range: 0.0-1.0, must be < max_soc
BATTERY_MAX_SOC=0.9          # range: 0.0-1.0, must be > min_soc

# EV Settings (validated parameters)
EV_MAX_POWER_KW=11.0         # must be positive
EV_BATTERY_CAPACITY_KWH=60.0 # must be positive
EV_DEFAULT_TARGET_SOC=0.8    # range: 0.0-1.0
EV_DEPARTURE_TIME=07:00      # format: HH:MM

# Legacy Growatt Configuration (deprecated - use PEMS instead)
GROWATT_DEVICE_SERIAL=
GROWATT_SIMULATION_MODE=false
# Price thresholds
GROWATT_EXPORT_PRICE_THRESHOLD=1.0
GROWATT_BATTERY_CHARGE_HOURS=2
GROWATT_INDIVIDUAL_CHEAPEST_HOURS=6
