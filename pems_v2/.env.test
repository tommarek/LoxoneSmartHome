# PEMS v2 Test Configuration
# Configuration for automated testing

# InfluxDB Configuration (test database)
INFLUXDB_URL=http://influxdb:8086
INFLUXDB_ORG=loxone
INFLUXDB_TOKEN=7HrEuj8kzOS1f-0mjU_GT4hS_9gHfdjUT6j5QAM22oDg0z44DsxmiveTGMqTa0Zl1QezDh132utLbXi-IL8h9A==
INFLUXDB_BUCKET_HISTORICAL=loxone
INFLUXDB_BUCKET_LOXONE=loxone
INFLUXDB_BUCKET_WEATHER=weather_forecast
INFLUXDB_BUCKET_SOLAR=loxone
INFLUXDB_BUCKET_PREDICTIONS=predictions_test
INFLUXDB_BUCKET_OPTIMIZATION=optimization_test
INFLUXDB_BUCKET_PRICES=ote_prices

# MQTT Configuration (test broker)
MQTT_BROKER=localhost
MQTT_PORT=1883
MQTT_CLIENT_ID=pems_v2_test

# Test system settings (override JSON config)
PEMS_SYSTEM__SIMULATION_MODE=true   # Always simulate in tests
PEMS_SYSTEM__ADVISORY_MODE=false
PEMS_SYSTEM__OPTIMIZATION_INTERVAL_SECONDS=1800  # 30 minutes for faster testing
PEMS_SYSTEM__CONTROL_INTERVAL_SECONDS=300

# Test battery configuration (smaller for faster tests)
PEMS_BATTERY__CAPACITY_KWH=5.0
PEMS_BATTERY__MAX_POWER_KW=2.5    # C-rate = 0.5, well within limits
PEMS_BATTERY__EFFICIENCY=0.9
PEMS_BATTERY__MIN_SOC=0.2
PEMS_BATTERY__MAX_SOC=0.8

# Test EV configuration
PEMS_EV__MAX_POWER_KW=7.4         # Single-phase charger
PEMS_EV__BATTERY_CAPACITY_KWH=40.0  # Smaller EV for testing
PEMS_EV__DEFAULT_TARGET_SOC=0.7
PEMS_EV__DEPARTURE_TIME=08:00

# Test optimization (smaller problem for faster solving)
PEMS_OPTIMIZATION__HORIZON_HOURS=24
PEMS_OPTIMIZATION__CONTROL_HOURS=12
PEMS_OPTIMIZATION__MAX_SOLVE_TIME_SECONDS=10  # Shorter for tests

# Note: All old-style variables (PV_*, THERMAL_*, OPT_*, etc.) are deprecated
# Configuration is now in config/system_config.json with PEMS_* overrides