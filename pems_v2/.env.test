# PEMS v2 Test Configuration
# Configuration for automated testing

# InfluxDB Configuration (test database)
INFLUXDB_URL=http://influxdb:8086
INFLUXDB_ORG=loxone
INFLUXDB_TOKEN=7HrEuj8kzOS1f-0mjU_GT4hS_9gHfdjUT6j5QAM22oDg0z44DsxmiveTGMqTa0Zl1QezDh132utLbXi-IL8h9A==
INFLUXDB_BUCKET_HISTORICAL=loxone
INFLUXDB_BUCKET_LOXONE=loxone
INFLUXDB_BUCKET_WEATHER=weather_forecast
INFLUXDB_BUCKET_SOLAR=loxone
INFLUXDB_BUCKET_PREDICTIONS=predictions_test
INFLUXDB_BUCKET_OPTIMIZATION=optimization_test

# MQTT Configuration (test broker)
MQTT_BROKER=localhost
MQTT_PORT=1883
MQTT_CLIENT_ID=pems_v2_test

# Test-safe values (all within validation ranges)
PV_UPDATE_INTERVAL=300    # Minimum allowed value
PV_HORIZON_HOURS=24       # Shorter for faster tests
PV_CONFIDENCE_LEVELS=[0.1,0.5,0.9]

# Conservative thermal settings for testing
THERMAL_DEFAULT_SETPOINT_DAY=20.0
THERMAL_DEFAULT_SETPOINT_NIGHT=18.0
THERMAL_COMFORT_BAND=1.0

# Small optimization problem for faster testing
OPT_HORIZON_HOURS=24
OPT_CONTROL_HOURS=12
OPT_TIME_STEP_MINUTES=60
OPT_MAX_SOLVE_TIME=10  # Shorter for tests
OPT_COST_WEIGHT=1.0
OPT_SELF_CONSUMPTION_WEIGHT=0.5
OPT_PEAK_SHAVING_WEIGHT=0.0    # Disabled for simpler test cases
OPT_COMFORT_WEIGHT=0.5

# Small test battery configuration
BATTERY_CAPACITY_KWH=5.0
BATTERY_MAX_POWER_KW=2.5    # C-rate = 0.5, well within limits
BATTERY_EFFICIENCY=0.9
BATTERY_MIN_SOC=0.2
BATTERY_MAX_SOC=0.8

# Test EV configuration
EV_MAX_POWER_KW=7.4         # Single-phase charger
EV_BATTERY_CAPACITY_KWH=40.0  # Smaller EV for testing
EV_DEFAULT_TARGET_SOC=0.7
EV_DEPARTURE_TIME=08:00

# Test system settings
PEMS_SIMULATION_MODE=true   # Always simulate in tests
PEMS_ADVISORY_MODE=false
PEMS_OPTIMIZATION_INTERVAL=1800  # 30 minutes for faster testing
PEMS_CONTROL_INTERVAL=300