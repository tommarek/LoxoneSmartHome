# Loxone Smart Home Configuration
# Production environment based on existing configuration

# General Settings
LOG_LEVEL=INFO

# Module Enable/Disable
UDP_LISTENER_ENABLED=true
MQTT_BRIDGE_ENABLED=true
WEATHER_SCRAPER_ENABLED=true
GROWATT_CONTROLLER_ENABLED=false
PEMS_ENERGY_CONTROLLER_ENABLED=true

# MQTT Configuration
MQTT_BROKER=mosquitto
MQTT_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=

# InfluxDB Configuration
INFLUXDB_HOST=http://192.168.0.201:8086
INFLUXDB_TOKEN=7HrEuj8kzOS1f-0mjU_GT4hS_9gHfdjUT6j5QAM22oDg0z44DsxmiveTGMqTa0Zl1QezDh132utLbXi-IL8h9A==
INFLUXDB_ORG=loxone
INFLUXDB_BUCKET=loxone

# UDP Listener Configuration (for receiving Loxone data)
UDP_LISTENER_HOST=0.0.0.0
UDP_LISTENER_PORT=2000

# Loxone Bridge Configuration (for sending to Loxone)
LOXONE_HOST=192.168.0.200
LOXONE_PORT=4000
# Topics to forward to Loxone
MQTT_TOPICS=energy/solar,teplomer/TC,teplomer/RH,teslamate/cars/1/+

# Weather Configuration
USE_SERVICE=openmeteo
LATITUDE=49.4949522
LONGITUDE=17.4302361
OPENWEATHERMAP_API_KEY=02d381a1d3bcf2323b8c4b9020bda72c
# Weather update interval (30 minutes)
WEATHER_UPDATE_INTERVAL=1800

# PEMS v2 Energy Management Configuration (Production Values)
PEMS_SIMULATION_MODE=false
PEMS_ADVISORY_MODE=false
# Production timing intervals (validated)
PEMS_OPTIMIZATION_INTERVAL=3600
PEMS_CONTROL_INTERVAL=300

# InfluxDB Configuration for PEMS v2
INFLUXDB_URL=http://192.168.0.201:8086
INFLUXDB_TOKEN=7HrEuj8kzOS1f-0mjU_GT4hS_9gHfdjUT6j5QAM22oDg0z44DsxmiveTGMqTa0Zl1QezDh132utLbXi-IL8h9A==
INFLUXDB_ORG=loxone
INFLUXDB_BUCKET_HISTORICAL=loxone
INFLUXDB_BUCKET_LOXONE=loxone
INFLUXDB_BUCKET_WEATHER=weather_forecast
INFLUXDB_BUCKET_SOLAR=loxone
INFLUXDB_BUCKET_PREDICTIONS=predictions
INFLUXDB_BUCKET_OPTIMIZATION=optimization

# PV Prediction Settings (production values)
PV_MODEL_PATH=models/pv_predictor.pkl
PV_UPDATE_INTERVAL=3600    # 1 hour updates
PV_HORIZON_HOURS=72        # 3-day forecast
PV_CONFIDENCE_LEVELS=[0.1,0.5,0.9]

# Thermal Settings (actual house preferences)
THERMAL_DEFAULT_SETPOINT_DAY=21.0
THERMAL_DEFAULT_SETPOINT_NIGHT=19.0
THERMAL_COMFORT_BAND=0.5

# Optimization Settings (production configuration)
OPT_HORIZON_HOURS=72       # 3-day optimization
OPT_CONTROL_HOURS=48       # 2-day control horizon
OPT_TIME_STEP_MINUTES=60   # 1-hour time steps
OPT_SOLVER=APOPT
OPT_MAX_SOLVE_TIME=60      # Allow more time in production
# Production weights (cost-focused)
OPT_COST_WEIGHT=1.0
OPT_SELF_CONSUMPTION_WEIGHT=0.8
OPT_PEAK_SHAVING_WEIGHT=0.3
OPT_COMFORT_WEIGHT=0.6

# Battery Settings (actual system specifications)
BATTERY_CAPACITY_KWH=10.0    # Actual installed capacity
BATTERY_MAX_POWER_KW=5.0     # Actual inverter power rating
BATTERY_EFFICIENCY=0.95      # Measured round-trip efficiency
BATTERY_MIN_SOC=0.1          # Conservative 10% minimum
BATTERY_MAX_SOC=0.9          # Conservative 90% maximum for longevity

# EV Settings (actual vehicle and charger)
EV_MAX_POWER_KW=11.0         # 3-phase 16A charger
EV_BATTERY_CAPACITY_KWH=77.0 # Actual vehicle capacity
EV_DEFAULT_TARGET_SOC=0.8    # Daily charging target
EV_DEPARTURE_TIME=07:15      # Actual departure time

# Legacy Growatt Configuration (deprecated - use PEMS instead)
GROWATT_DEVICE_SERIAL=
GROWATT_SIMULATION_MODE=false
# Price thresholds and control parameters
GROWATT_EXPORT_PRICE_THRESHOLD=1.0
GROWATT_BATTERY_CHARGE_HOURS=2
GROWATT_INDIVIDUAL_CHEAPEST_HOURS=6